Vue.component("photo-group-radio-component",{name:"photoGroupRadio",template:'<photo-group-component class="jz-photo-group-radio" :value="value" @input="inputHandler"><photo-component class="photo-group-radio-wrap" size="small" :label="item.label" v-for="(item, index) in data" :key="item.label"><img class="photo-group-radio-img" v-if="item.src" :src="item.src" width="100%" height="100%"><div class="photo-group-radio-img" v-else :class="\'photo-group-radio-img\' + index"></div></photo-component></photo-group-component>',props:{value:[String,Number,Boolean],data:{type:Array,"default":function(){return[]}}},methods:{inputHandler:function(a){this.$emit("input",a)}}});var popupID=pageData.popupID,linkTemplate=pageData.linkArray,linkArray=pageData.linkTemplate,is_single=pageData.is_single,parentID=pageData.parentID,linkId=pageData.linkId,singleLinkData=pageData.singleLinkData,linkPicList=pageData.linkPicList,cubeList=pageData.cubeList,moduleId=pageData.moduleId,hasSubTitle=pageData.hasSubTitle,hasTextLayout=pageData.hasTextLayout,defaultFilePath=pageData.defaultFilePath,hasIco=pageData.hasIco,colOldIconListJson=pageData.colOldIconListJson,linkSysIcoId=colOldIconListJson[0].id,moduleType=pageData.moduleType,linkListSize=pageData.linkListSize,content=pageData.content,action=pageData.action,cubeStyle=pageData.cubeStyle,urlMaxlen=pageData.urlMaxlen,fileUpload2_settings1={title:"娣诲姞鍥剧墖",maxSize:parseInt(1),type:["jpg","jpeg","gif","png"],openIcon:true,entry:"m_titleIcon"};fileUpload2_settings={title:"娣诲姞鍥剧墖",maxSize:parseInt(1),type:["jpg","jpeg","gif","png"]};var buttonTypeList=[1,2,3,4,5,6,7,8];var linkCusIcoType=0;var linkSysIcoType=0;var linkSysIcoContent="";var linkSysIcoColor="";var linkCusIcoId="";var linkCoverFileId="";var linkCoverPreViewPath="";var title_fontSize_list=[];for(i=10;i<=30;i++){var item={};item.value=i;title_fontSize_list.push(item)}var subTitle_fontSize_list=[];for(i=10;i<=30;i++){var item={};item.value=i;subTitle_fontSize_list.push(item)}var textLayout_list=[];for(i=1;i<=8;i++){var item={};item.label=i;textLayout_list.push(item)}if(is_single==0){var parentFrame=Fai.top.document.getElementById("popupWindowIframe"+parentID);var parentWin=parentFrame.contentWindow}else{var linkPicList=pageData.linkPicList;Mobi.logDog(200459,16)}if(linkId==0){linkArray=linkTemplate;$("#link_fontIco").text("榛樿").css({"font-size":"0.8rem",display:"block"})}else{if(is_single==0){linkArray=parentWin.linkList[(parseInt(linkId)-1)]}else{linkArray=singleLinkData;if(Fai.top._other.cml==undefined){Fai.top._other.cml=[]}if(Fai.top._other.cml.indexOf(moduleId)!=-1){var cubeLayoutId=Fai.top._other.dc;for(var i=0;i<cubeList.length;i++){if(cubeLayoutId==cubeList[i].id){hasSubTitle=cubeList[i].hasSubTitle;hasIco=cubeList[i].hasIco;hasTextLayout=cubeList[i].hasTextLayout;break}}}}if(is_single==0){linkCoverPreViewPath=parentWin.linkPicList[(parseInt(linkId)-1)].linkCoverPreViewPath}else{linkCoverPreViewPath=linkPicList[(parseInt(linkId)-1)].linkCoverPreViewPath}linkCoverFileId=linkArray.cover.fileId;if(linkArray.cover.tile==-1){linkCoverPreViewPath="";linkCoverFileId=""}if(hasIco==1){var linkIcoPreViewPath="";if(is_single==0){linkIcoPreViewPath=parentWin.linkPicList[linkId-1].linkIcoPreViewPath}else{linkIcoPreViewPath=linkPicList[(parseInt(linkId)-1)].linkIcoPreViewPath}linkCusIcoType=linkArray.icoCusType;if(linkCusIcoType==0){linkSysIcoId=linkArray.icoSysId;if(linkArray.icoSysType){linkSysIcoType=linkArray.icoSysType}if(linkArray.icoSysContent){linkSysIcoContent=linkArray.icoSysContent}if(linkArray.icoSysColor){linkSysIcoColor=linkArray.icoSysColor}if(linkSysIcoContent!=undefined&&linkSysIcoType==0){if(linkSysIcoContent==""){$("#link_fontIco").text("榛樿").css("font-size","0.8rem")}else{var previewStyle=[];previewStyle.push("<style id='fontsIcoPreview'>");previewStyle.push("		#link_fontIco:before {content:'"+linkSysIcoContent+"';}");previewStyle.push("</style>");$("head").append(previewStyle.join(""))}if(linkSysIcoColor){$("#link_fontIco").css("color",linkSysIcoColor)}$("#link_fontIco").show();$("#link_ico").hide()}else{$("#link_fontIco").hide();$("#link_ico").show()}}else{$("#link_fontIco").hide();$("#link_ico").show();linkCusIcoId=linkArray.icoCusId;$("#link_ico").css("background","#ffffff")}}}var bgPicScale=0;if(linkArray.cover.tile==101){bgPicScale=0}else{if(linkArray.cover.tile==102){bgPicScale=1}else{if(linkArray.cover.tile==103){bgPicScale=3}}}var vueData={};var isDefaultType=false;vueData.popupID=popupID;vueData.buttonTypeList=buttonTypeList;vueData.linkArray=linkArray;if(vueData.linkArray.linkType==0){vueData.linkArray.linkType=1;isDefaultType=true}vueData.linkId=linkId;console.log(vueData.linkId);vueData.hasSubTitle=hasSubTitle;vueData.fileUpload2_settings1=fileUpload2_settings1;vueData.changeElemPanel=true;vueData.changeUrlPanel=true;vueData.hasTextLayout=hasTextLayout;vueData.defaultFilePath=defaultFilePath;vueData.linkIcoPreViewPath=linkIcoPreViewPath;vueData.linkSysIcoContent=linkSysIcoContent;vueData.linkSysIcoType=linkSysIcoType;vueData.title_fontSize_list=title_fontSize_list;vueData.subTitle_fontSize_list=subTitle_fontSize_list;vueData.textLayout_list=textLayout_list;vueData.linkListSize=linkListSize;vueData.hasIco=hasIco;vueData.backgroundData={color:linkArray.cover.color,picScale:bgPicScale,bgData:pageData,uploadData:fileUpload2_settings,imgPath:linkCoverPreViewPath,imgId:linkCoverFileId,colorPicker:{showInTop:false,appendToWeb:false,left:35,top:35,noAlpha:false},bgRepeatLists:[{value:0,label:"濉厖",type:"not-tile",hidden:false},{value:1,label:"鎷変几",type:"stretch",hidden:false},{value:3,label:"骞抽摵",type:"Tiling",hidden:false}]};vueData.fontColorPicker={showInTop:false,appendToWeb:false,left:35,top:35,noAlpha:false};var app=new Vue({el:"#app",data:vueData,methods:{bgImgChange:function(a){onCoverUploadEvent(a);Mobi.setPageChange(true,popupID)},bgScaleChange:function(a){if(a==0){this.linkArray.cover.tile=101}else{if(a==1){this.linkArray.cover.tile=102}else{this.linkArray.cover.tile=103}}$(".bg_effect").find(".jz-bgContent .jz-bgRow:last-child").addClass("bgColorHide");Mobi.setPageChange(true,popupID)},bgColorChange:function(a){this.linkArray.cover.color=a;onColorChange(a);Mobi.setPageChange(true,popupID)},elePanelShow:function(){this.changeElemPanel=!this.changeElemPanel;if(!this.changeElemPanel){$(".ele_setting_title").find("span").removeClass("drop_icon_img").addClass("drop_icon_image")}else{$(".ele_setting_title").find("span").removeClass("drop_icon_image").addClass("drop_icon_img")}},urlPanelShow:function(){this.changeUrlPanel=!this.changeUrlPanel;if(!this.changeUrlPanel){$(".url_setting_title").find("span").removeClass("drop_icon_img").addClass("drop_icon_image")}else{$(".url_setting_title").find("span").removeClass("drop_icon_image").addClass("drop_icon_img")}},fontColorchange:function(a){this.linkArray.textData.color=a;Fai.enablePopupWindowBtn(popupID,"save",true)},subFontColorchange:function(a){this.linkArray.subTextData.color=a;Fai.enablePopupWindowBtn(popupID,"save",true)},pageChange:function(){Fai.enablePopupWindowBtn(popupID,"save",true)}}});$(function(){var c="";if(linkId==0){c="娣� 鍔�"}else{if(is_single==0){c="淇� 鏀�"}else{c="淇� 瀛�"}}c=(linkId==0)?"娣� 鍔�":(is_single==0?"淇� 鏀�":"淇� 瀛�");Fai.popupWindowVersionTwo.addPopupWinBtnComponentDom({popupId:popupID,id:"save",text:c,click:"save",disable:true,active:true});Fai.popupWindowVersionTwo.addPopupWinBtnComponentDom({popupId:popupID,id:"close",text:"鍙� 娑�",click:"close"});Fai.popupWindowVersionTwo.renderPopupWinBtnComponent({popupId:popupID,initEvents:{save:save}});Fai.top.$("#popupWindow"+popupID).find(".pWBottom").css("border","1px solid #e3e2e8");if(vueData.backgroundData.imgPath!=""){$(".bg_effect").find(".jz-bgContent .jz-bgRow:last-child").addClass("bgColorHide")}Mobi.fileUpload2("#ico_fileButton",fileUpload2_settings1,onIcoUploadEvent);var d=linkArray.href,e=linkArray.columnType,b=linkArray.ide;var a={inputId:"cus_hrefInput",moduleType:moduleType,jumpName:d,jumpType:e,jumpIde:b,setPageChange:setPageChange};a.frameSrcUrl=top.Mobi.getPreviewWindow().Mobi.getSiteMultiLanguageUrl();Mobi.jumpControl(a);Mobi.loadPageChange({unBindId:[],popupID:popupID})});function onIcoUploadEvent(b){if(b){var g=$.parseJSON(b);var a=g.data[0].fileId;var d=g.data[0].preViewPath;var f=g.data[0].classname;var e=g.data[0].content;var c=g.data[0].color;if(!!e){selectedSystemColumnIcon(f,a,e,c)}else{$("#link_fontIco").hide();$("#link_ico").show().attr("src",d);$("#link_ico").css("background","#ffffff");vueData.linkArray.icoCusType=1;vueData.linkArray.icoCusId=a;vueData.linkIcoPreViewPath=d}setPageChange()}}function removeClassByReg(b,c){if(!b||!c){return false}var a=$(b),d=a.attr("class").split(" ");a.removeClass();$(d).each(function(e,f){if(!f.match(c)){a.addClass(f)}})}function selectedSystemColumnIcon(d,a,c,b){if($("#fontsIcoPreview").get(0)){$("#fontsIcoPreview").html("")}if(typeof(b)=="undefined"){b=""}removeClassByReg($("#link_fontIco").get(0),/^faisco-icons-/);$("#link_fontIco").addClass(d).text("").css({color:b,"font-size":""});$("#link_fontIco").show();$("#link_ico").hide();vueData.linkArray.icoSysColor=b;vueData.linkArray.icoSysContent=getComputedStyle($("#link_fontIco").get(0),":before").content;vueData.linkArray.icoSysContent=vueData.linkArray.icoSysContent.replace(/\"|\'/g,"");vueData.linkArray.icoCusId="";vueData.linkArray.icoCusType=0;setPageChange()}function onCoverUploadEvent(c){if(c){var g=$.parseJSON(c);var b=g.data[0].fileId;var e=g.data[0].filePath;var d=g.data[0].pre640ViewPath;var f=parseInt(g.data[0].fileWidth);var a=parseInt(g.data[0].fileHeight);linkCoverFileId=b;if(f<640||a<640){vueData.backgroundData.imgPath=e}else{vueData.backgroundData.imgPath=d}if(linkArray.cover.tile==-1){vueData.backgroundData.picScale=101}if(e==""){vueData.linkArray.cover.fileId=""}setPageChange()}}function save(){if(vueData.linkArray.coverType==2){if(linkCoverFileId!=""){vueData.linkArray.cover.fileId=linkCoverFileId}}if(vueData.linkArray.linkType==1){vueData.linkArray.columnType=parseInt($("#jumpCtrl").attr("_ltype"));vueData.linkArray.ide=$.trim($("#jumpCtrl").attr("_lide"));var a=$.trim($("#cus_hrefInput").val());if(a!=""){if($("#cus_hrefInput").attr("disabled")!="disabled"){a=Mobi.fixUrl(a,Fai.top._userHostName)}if(a.length>urlMaxlen){Fai.ing("缃戝潃闀垮害涓嶈兘瓒呰繃"+urlMaxlen,true);$("#tabs").tabs({selected:0});$("#cus_hrefInput").focus();return false}vueData.linkArray.href=a}else{Fai.ing("璇疯緭鍏ヨ嚜瀹氫箟閾炬帴鍦板潃锛�",true);$("#cus_hrefInput").focus();return}if(isDefaultType){vueData.linkArray.linkType=0}}if(linkId==0){closeAddLink()}else{if(is_single==0){closeEditLink(linkId)}else{closeToAjaxSave()}}reSetPageChange();if(linkId==0){Fai.closePopupWindow(popupID)}else{if(is_single==0){Fai.closePopupWindow(popupID)}}}function closeEditLink(){parentWin.linkPicList[(parseInt(linkId)-1)].linkIcoPreViewPath=vueData.linkIcoPreViewPath;parentWin.linkPicList[(parseInt(linkId)-1)].linkCoverPreViewPath=vueData.backgroundData.imgPath}function closeAddLink(){var b=parentWin.app.tableData.data;var a=linkListSize+1;var d={linkIcoPreViewPath:"",linkCoverPreViewPath:""};d.linkIcoPreViewPath=vueData.linkIcoPreViewPath;d.linkCoverPreViewPath=vueData.backgroundData.imgPath;var c={id:a,linkListItem:vueData.linkArray,linkPicListItem:d};b.push(c);parentWin.linkPicList.push(d);parentWin.linkList.push(vueData.linkArray)}function closeToAjaxSave(){var b=pageData.content;var a=b.cubeLayoutId;contentutId=b.cubeLayoutId;b.linkList[(parseInt(linkId)-1)]=vueData.linkArray;linkPicList[(parseInt(linkId)-1)].linkIcoPreViewPath=vueData.linkIcoPreViewPath;linkPicList[(parseInt(linkId)-1)].linkCoverPreViewPath=vueData.backgroundData.imgPath;var c=[];c.push("style="+cubeStyle);c.push("&name="+Fai.encodeUrl(""));c.push("&content="+Fai.encodeUrl($.toJSON(b)));Fai.ing("姝ｅ湪鎻愪氦锛岃绋嶇瓑...",false);$.ajax({type:"post",url:action,data:c.join(""),error:function(){Fai.ing("鏈嶅姟绻佸繖锛岃绋嶅悗鍐嶈瘯銆�",false)},success:function(e){var d=jQuery.parseJSON(e);reSetPageChange();if(Fai.successHandle(e,"","绯荤粺閿欒","",3,1)){Mobi.getPreviewWindow().Mobi.refreshModule(d.id,d.div,name);Mobi.changeCubeStyle(d.id,b.linkList,linkPicList);Fai.closePopupWindow(popupID)}}})}function onColorChange(a){vueData.linkArray.cover.color=a;setPageChange()}function reSetPageChange(){Mobi.setPageChange(false,popupID)}function setPageChange(){Mobi.setPageChange(true,popupID)};